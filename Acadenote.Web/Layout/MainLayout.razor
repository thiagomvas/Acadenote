@inherits LayoutComponentBase
@inject AppTheme theme
@inject ColorUtility colors

<div class="container">
    <aside class="sidebar" style="@border">
            <Acadebutton OnClick="@(() => NavigateTo("/anotacao"))" Color="@colors.BackgroundAccent">
                <div><Acadeicon Color="@colors.Text.Primary" Icon="Acadeicon.IconType.Note" /></div> Notes
            </Acadebutton>
        <Acadebutton OnClick="@(() => NavigateTo("/404"))" Color="@colors.BackgroundAccent">
                <div><Acadeicon Color="@colors.Text.Primary" Icon="Acadeicon.IconType.Hashtag" /></div> Algorithms & Calculators
            </Acadebutton>
        <Acadebutton OnClick="@(() => NavigateTo("/404"))" Color="@colors.BackgroundAccent">
                <div><Acadeicon Color="@colors.Text.Primary" Icon="Acadeicon.IconType.Book" /></div> Guides
            </Acadebutton>
    </aside>
    <main class="content">
        @Body
    </main>
</div>

@code {
    private string border => $"border-right:  2px dashed {colors.Primary}94";
    [Inject] private NavigationManager Nav { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            theme.IsDarkMode = await theme.IsBrowserDarkMode();
            await theme.ListenForThemeChanges();
        }
    }

    protected override void OnInitialized()
    {
        theme.OnChange += StateHasChanged;
    }

    private void NavigateTo(string path)
    {
        Nav.NavigateTo(path);
    }
}